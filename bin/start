#!/usr/bin/env bash

# First stop if anything
echo "Stopping microservices related to the example..."
ps -ef | grep "[l]b-next" | awk '{print $2}' | xargs kill -9

echo "Starting services..."

cd services/account
ts-node index.ts lb-next-account-micro-serv & echo "Started account service, PID:" $!

cd ../customer
ts-node index.ts lb-next-customer-micro-serv & echo "Started customer service, PID:" $!

cd ../transaction
ts-node index.ts lb-next-transaction-micro-serv & echo "Started transaction service, PID:" $!

cd ../facade
ts-node index.ts lb-next-facade-micro-serv & echo "Started facade service, PID:" $!

sleep 5
echo "All microservices started successfully."
echo "To test the application, run the get account summary script:"
echo "./bin/get-account-summary"
echo "./bin/get-account"